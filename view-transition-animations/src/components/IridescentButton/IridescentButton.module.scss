/* Unique keyframe names to avoid collisions in CSS Modules */
@keyframes ib_spin {
  to { --ib-angle: 360deg; }
}

@keyframes ib_shift {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Register the custom property for smoother animation in modern browsers */
@property --ib-angle {
  syntax: "<angle>";
  inherits: false;
  initial-value: 0deg;
}

:root {
  --ib-radius: 14px;
  --ib-pad-y: 0.7rem;
  --ib-pad-x: 1.0rem;
  --ib-font: 0.95rem;

  --ib-speed-spin: 8s;
  --ib-speed-shift: 14s;
}

/* Base */
.button {
  --ib-angle: 0deg;

  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  border: none;
  border-radius: var(--ib-radius);
  cursor: pointer;
  isolation: isolate;
  overflow: hidden;

  padding: var(--ib-pad-y) var(--ib-pad-x);
  font: 600 var(--ib-font)/1.1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  letter-spacing: 0.2px;

  color: #0b0b0c;
  background: transparent;

  /* Subtle 3D */
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.15),
    0 8px 22px rgba(0,0,0,0.25);
  transition: transform 180ms ease, box-shadow 180ms ease, filter 180ms ease;
}

/* Animated fill (behind content) */
.button::before {
  content: "";
  position: absolute;
  inset: 0;
  z-index: -1;
  border-radius: inherit;

  /* Layer 1: iridescent conic gradient that rotates */
  background:
    conic-gradient(
      from var(--ib-angle),
      #ff6ec7,
      #6ee7ff,
      #7cff9e,
      #ffd86e,
      #d07cff,
      #ff6ec7
    );

  /* Movement */
  animation: ib_spin var(--ib-speed-spin) linear infinite;
  filter: saturate(1.2);
}

/* Layer a shifting soft-film sheen */
.button::after {
  content: "";
  position: absolute;
  inset: -40%;
  z-index: -1;
  border-radius: 50%;

  background:
    radial-gradient(60% 110% at 20% 0%, rgba(255,255,255,0.45), rgba(255,255,255,0) 60%),
    linear-gradient(90deg,
      rgba(255,255,255,0.0) 0%,
      rgba(255,255,255,0.18) 35%,
      rgba(255,255,255,0.0) 70%
    );
  background-size: 200% 200%;
  animation: ib_shift var(--ib-speed-shift) ease-in-out infinite;
  mix-blend-mode: soft-light;
  pointer-events: none;
}

/* Readability overlay for solid variant */
.variant-solid {
  color: #0a0a0b;
}
.variant-solid .label {
  position: relative;
  z-index: 1;
}
.variant-solid::before {
  /* Add a translucent dark-to-clear film to ensure text contrast on bright hues */
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.15);
}
.variant-solid {
  /* Optional: slight blur of the gradient for a smoother film look */
  backdrop-filter: saturate(1.1);
}

/* Ghost variant: transparent center with animated border only */
.variant-ghost {
  background: transparent;
  color: #ffffff;
}
.variant-ghost::before {
  padding: 2px; /* border thickness */
  background:
    /* border gradient */
    conic-gradient(from var(--ib-angle),
      #ff6ec7,
      #6ee7ff,
      #7cff9e,
      #ffd86e,
      #d07cff,
      #ff6ec7
    );
  /* Create a hollow center so only the border shows */
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
}
.variant-ghost::after {
  display: none; /* border-only look, no sheen */
}

/* Sizes */
.size-md { }
.size-lg {
  --ib-pad-y: 0.9rem;
  --ib-pad-x: 1.2rem;
  --ib-font: 1.05rem;
  --ib-radius: 16px;
}

/* Interactions */
.button:hover {
  transform: translateY(-1px);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.18),
    0 10px 26px rgba(0,0,0,0.3);
  filter: brightness(1.02);
}

.button:active {
  transform: translateY(0);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.12),
    0 6px 16px rgba(0,0,0,0.25);
}

.button:disabled,
.button[aria-disabled="true"] {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .button::before,
  .button::after {
    animation: none !important;
  }
}
